layouts:
  - id: 'dashboard'
    root: true
    title: 'Dashboard Layout'
    fg_color: 'white'
    selected_fg_color: 'bright_yellow'
    # bg_color: 'bright_black'
    selected_bg_color: 'bright_black'
    title_fg_color: 'black'
    selected_title_fg_color: 'bright_white'
    title_bg_color: 'green'
    selected_title_bg_color: 'bright_green'
    border: true
    border_color: 'bright_white'
    selected_border_color: 'bright_green'
    title_position: 'start'
    fill_char: '.'
    overflow_behavior: 'scroll'

    children:
      - id: 'header'
        position:
          x1: 0%
          y1: 0%
          x2: 100%
          y2: 10%
        min_width: 80
        min_height: 3
        max_width: 100
        max_height: 3
        scroll: false
        on_error:
          - echo "Error loading header."
        on_enter:
          - echo "Welcome to the server dashboard."
          - echo "Please select an option."   
        children:
          - id: 'title'
            title: 'Title Display'
            position:
              x1: 00%
              y1: 00%
              x2: 20%
              y2: 100%
            content: 'Server Dashboard'
            scroll: false
            on_error:
              - echo "Error loading title."
            on_enter:
              - echo -n "Time:\ "
              - date
            on_leave:
              - echo -n "Time:\ "
              - date
          - id: 'time'
            title: 'Time Display'
            position:
              x1: 80%
              y1: 0%
              x2: 100%
              y2: 100%
            on_refresh:
              - date
            scroll: false
            tab_order: 1
            on_error:
              - echo "Error loading time."
            on_enter:
              - echo "Current Time"
            on_leave:
              - echo "Leaving Current Time"
            thread: true
      - id: 'cpu'
        title: 'Cpu Usage'
        position:
          x1: 2%
          y1: 15%
          x2: 48%
          y2: 35%
        scroll: true
        tab_order: 2
        on_error:
          - echo "Error loading CPU stats."
        on_refresh:
          - 'top -l 1 | grep -E "^CPU" | awk ''{print "User: " $3, "System: " $5, "Idle: " $7}'''
        # overflow_behavior: 'removed'
        title_position: 'center'

      - id: 'memory'
        title: 'Memory Usage'
        position:
          x1: 50%
          y1: 15%
          x2: 98%
          y2: 35%
        on_refresh:
          - 'vm_stat | awk ''NR==2{gsub("K$", "", $3); print "Free: " $3/256 " MB"}'''
          - 'vm_stat | awk ''NR==3{gsub("K$", "", $3); print "Active: " $3/256 " MB"}'''
          - 'vm_stat | awk ''NR==4{gsub("K$", "", $3); print "Inactive: " $3/256 " MB"}'''
          - 'vm_stat | awk ''NR==5{gsub("K$", "", $3); print "Wired: " $3/256 " MB"}'''
          - 'vm_stat | awk ''NR==6{gsub("K$", "", $3); print "Compressed: " $3/256 " MB"}'''
          - 'vm_stat | awk ''NR==7{gsub("K$", "", $3); print "Swap: " $3/256 " MB"}'''
        scroll: false
        tab_order: 3
        on_error:
          - echo "Error loading memory stats."

      - id: 'log'
        title: 'LOGS'
        position:
          x1: 2%
          y1: 38%
          x2: 98%
          y2: 68%
        scroll: false
        on_error:
          - echo "Error loading logs."
        children:
          - id: 'log_input'
            title: 'Log Input'
            position:
              x1: 5%
              y1: 5%
              x2: 45%
              y2: 95%
            content: 'echo "Enter a message to log:"'
            scroll: false
            tab_order: 4
            on_error:
              - echo "Error loading log input."
            on_enter:
              - echo "Enter a message to log:"
              - read message
              - echo $message >> /tmp/xblog.txt
              - echo "Message logged."
            on_leave:
              - echo "Leaving log input."
            title_position: 'start'
          - id: 'log_output'
            title: 'Log Output'
            position:
              x1: 55%
              y1: 5%
              x2: 95%
              y2: 95%
            on_refresh:
              - log show --debug --last 1m | tail -n 50
            scroll: true
            tab_order: 5
            on_error:
              - echo "Error loading log output."
            on_enter:
              - echo "Last 100 log entries"
            on_leave:
              - echo "Leaving log output."
            title_position: 'end'

      - id: 'button_at_bottom_right'
        # title: 'Button at Bottom Right Above Footer'
        position:
          x1: 80%
          y1: 80%
          x2: 90%
          y2: 85%
        bg_color: 'bright_blue'
        fg_color: 'bright_white'
        selected_bg_color: 'bright_yellow'
        selected_fg_color: 'bright_black'
        on_keypress:
          'return':
            - echo "Enter key pressed."
        content: 'Press Enter to trigger an action.'
        scroll: false
        tab_order: 6
        on_error:
          - echo "Error loading button."
      - id: 'footer'
        title: 'Footer'
        position:
          x1: 0%
          y1: 90%
          x2: 100%
          y2: 100%
        on_keypress:
          'return':
            - echo "Enter key pressed."
        content: 'Updated every 5 seconds.'
        scroll: false
        tab_order: 7
        on_error:
          - echo "Error loading footer."
